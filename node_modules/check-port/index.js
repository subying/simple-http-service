/*
	测试端口功能
	by subying
*/


/*
依赖模块
 */
var net = require('net')
	,socket = net.Socket
;


/*
主要方法
port---端口
host---域名或者IP
cb----回调方法
*/
var testPort = function(port,host,cb){
	var nsk = new socket();

	nsk.setTimeout(5000);//设置连接超时时间  5s
	nsk.on('connect',function(){//连接状态
		nsk.destroy();//销毁  不需要保持连接状态
		cb(port,'open');
	})
	.on('timeout',function(){//连接超时
		nsk.destroy();
		cb(port,'timeout');
	})
	.on('error',function(){//连接错误
		nsk.destroy();
		cb(port,'closed');
	});

	nsk.connect(port,host);//执行连接
};



module.exports = testPort;